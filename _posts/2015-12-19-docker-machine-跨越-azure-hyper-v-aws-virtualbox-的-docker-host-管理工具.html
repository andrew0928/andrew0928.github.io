---
layout: post
title: Docker-Machine, 跨越 Azure, Hyper-V, AWS, VirtualBox 的 Docker-Host 管理工具
categories:
- "未分類"
tags: []
published: false
comments: true
---
<p><a href="http://columns.chicken-house.net/wp-content/uploads/2015/12/docker_machine1.png" rel="attachment wp-att-601"><img class="wp-image-601 alignleft" src="http://columns.chicken-house.net/wp-content/uploads/2015/12/docker_machine1.png" alt="docker_machine[1]" width="204" height="242" /></a>原本這篇打算比較 .net core 程式，在不同的平台 (Windows / Linux, 我手邊沒 MacOS 可以測，不然就加進來了) 的表現，包含執行效能，還有不同的 OS 一定會有影響的記憶體管理等等我在意的議題。然而要比較這些差異，要控制好執行環境是必要的，比如我總不能拿同樣的程式，在 NAS 上的 Docker 跑得很慢，在 PC 上的 windows 10 跑的就飛快，然後做出 windows 比 linux 好這種結論吧 ? XD</p>

<p>也因為這樣，我開始用同樣的環境，用我的桌機 (windows 10 enterprise + hyper-v, i7-2600, 24G ram), 開同樣規格的 VM, 分別跑 windows 2012 r2 / linux 來比較才客觀。這時開始面臨到我需要在不同環境來管理 docker-host, 而非之前只管理 docker-container 那種情境，因此就多了這篇: Docker-Machine 的介紹。</p>

<p>Docker-Machine 官方介紹在<a href="https://www.docker.com/docker-machine" target="_blank">這邊</a>，我摘要貼一下重點:
<h2 style="padding-left: 30px;"><em>Docker Machine</em></h2>
<p style="padding-left: 30px;"><em>To get started with Docker, first you need to setup a Docker Engine. Docker Machine automatically sets up Docker on your computer, on cloud providers, and inside your data center. Docker Machine provisions the hosts, installs Docker Engine on them, and then configures the Docker client to talk to the Docker Engines.</em></p>
<p style="padding-left: 30px;">(中間略)</p></p>

<p><h3 style="padding-left: 30px;"><em>Create Hosts Anywhere</em></h3>
<p style="padding-left: 30px;"><em>Docker Machine can create hosts on most major virtualization hypervisors and in cloud service providers. Docker Machine has driver support for <span style="color: #ff0000;">AWS, Digital Ocean, Google Cloud Platform, IBM Softlayer, <strong>Microsoft Azure and Hyper-V</strong>, OpenStack, Rackspace, VirtualBox, VMware Fusion®, vCloud® Air™ and vSphere®</span>.</em></p>
<p style="padding-left: 30px;"><em>Simply add the credentials for your environment:</em></p>
簡單的來說，Docker-Machine 把在各種平台上建立 Docker-Host 的機制操作方式給統一了。提供一致的 docker-machine 指令，底層則提供了各種不同平台的 docker-driver, 讓你可以在所有支援的平台上，用一樣的方式管理能夠執行 docker-engine 的 VM。</p>

<p>看了一下，支援的平台還不少 (見上面引言我標紅字的部分)，Windows 派的當然是挑 Hyper-V 及 Microsoft Azure 這兩個平台，也在支援的清單內。往後的操作也都會以我熟悉的環境為主，本機的環境當然就是 Hyper-V, 雲端環境則以 Azure 為首選。</p>

<p>&nbsp;
<h1>從 Docker Toolbox 套件，安裝 Docker-Machine</h1>
<img class="alignleft" src="https://www.docker.com/sites/default/files/products/tbox.jpg" alt="" width="257" height="200" />這算是最簡單的一個步驟了。其實 Docker-Toolbox 整包套件裡面，就已經包含所有你必要的工具了。Docker Toolbox 收集了你要入門使用 Docker 的常用工具，整在一個套件裡方便大家使用。官方網站在<a href="https://www.docker.com/docker-toolbox" target="_blank">這邊</a>，裡面就包括了 Docker-Machine, 甚至連 Oracle 的 VirtualBox 虛擬化工具都幫你包進去了。不過我既然都已經有 Hyper-V 了，何必再去用 Virtual Box ? 很無奈這是必裝的項目之一，我又懶得個別去找這些東西... 安裝完成後再去控制台移除 Virtual Box 就好了</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
